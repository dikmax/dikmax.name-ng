---
title: "CommonMark"
date: "2014-09-19T10:45:00+03:00"
published: true
tags: [commonmark, markdown, программирование]
cover:
    img: /images/3rd-party/markdown-logo.png
    small: true
    color: \#ddd
---

Пару недель назад в\ блоге [Coding Horror][coding-horror] появилась запись о\ том, что объединённые усилия GitHub,
StackOverflow и ещё нескольких компаний увенчались успехом и\ они готовы представить общественности точную [спецификацию
стандарта Markdown][spec].

Ну\ как точную. По\ моему мнению, спецификация, основанная на\ примерах, а\ не\ на\ точных формулировках, не\ может быть
абсолютно точной. Иначе придётся описывать множество всяческих граничных вариантов. И\ нет гарантий, что
кто-нибудь не\ придумает пример, который не\ покрывается спецификацией. У\ меня, например, [это получилось][bug].
Зато такой подход позволяет объединить спецификацию и\ набор тестов для проверки парсеров в\ один файл.

Когда создатели только объявили об\ окончании основных работ над спецификацией, её назвали Standard Markdown. И\ тут\ же
поднялось множество криков, что они пытаются украсть авторство Markdown у\ [Джона Грубера][gruber]. Ведь действительно,
кто будет смотреть на\ просто Markdown, когда есть Standard Markdown. Но\ позиция самого Грубера тоже не\ очень понятна.
За\ 10\ лет существования формата он\ не\ предпринял ничего, чтобы исправить все те\ проблемы и\ неясности, что
существуют в\ Markdown. По мнению Джона, именно эта неточность формулировок и\ сыграла главную роль в\ популярности
этого формата. Но\ теперь, когда другие проделали эту работу, он\ высказал свое "фи". Что\ же, автор есть автор.
И\ после некоторого обсуждения проект переименовали в\ CommonMark.

Вообще [Markdown] интересный язык разметки. На нем очень удобно писать, что, вероятно, и\ сделало его таким популярным.
В\ нём большая часть разметки интуитивно понятна, сразу видно где список, где цитата. Конечно, нужно раз взглянуть, как
добавлять ссылки и\ картинки, но\ больше проблем с\ этим не\ возникает.

Проблемы начинаются, когда пишешь парсер для этого формата. Из-за отсутствия чёткой спецификации каждый начинает
изгаляться как может. Один и\ тот\ же текст может подразумевать несколько различных вариантов разбора, и\ нужно быть
очень осторожным, если, например, хочешь добавить блок с\ кодом куда-нибудь в\ список. Спецификация CommonMark
предлагает наиболее логичные варианты чтения текста, но\ не\ самые простые. Поэтому, чтобы написать парсер,
соответствующий данной спецификации, придётся изрядно постараться.

Но\ хочется верить, что когда большая часть парсеров начнёт соответствовать этой спецификации, значительно упростится
переносимость текстов между различными приложениями.

[bug]: https://github.com/jgm/stmd/issues/94
[coding-horror]: http://blog.codinghorror.com/
[gruber]: http://daringfireball.net/
[Markdown]: https://en.wikipedia.org/wiki/Markdown
[spec]: http://spec.commonmark.org/
