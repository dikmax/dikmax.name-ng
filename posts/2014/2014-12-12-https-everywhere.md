---
title: "HTTPS Everywhere"
date: "2014-12-12T18:30:00+03:00"
published: true
tags: [https, блог]
cover:
    img: /images/3rd-party/https-everywhere-logo.png
    small: true
---

В\ том числе и\ у\ меня. Я\ сделал то, что нужно было сделать уже давно,\ --- добавил поддержку шифрования на\ сайт,
то\ есть [https]. Более того, при попытке запросить обычную страницу, сервер перенаправляет на\ её\ защищённую версию.
Теперь никто не\ сможет вмешиваться в\ трафик между блогом и\ браузером. А\ ещё поисковики обещают добавлять
дополнительный вес результатам с\ сайтов с\ поддержкой шифрования. Так что одни плюсы.

<!--more-->

Самая большая проблема с\ включением https\ --- необходимость обзавестись сертификатом, который будет подтверждать что
вы\ --- это вы. А\ сертификаты стоят денег. Например, у\ Thawte\ --- довольно известной фирмы\ --- цены [начинаются
от\ $149 в\ год][thawte], DigiCert\ --- [от\ $175][DigiCert], Symantec (бывший VeriSign)\ --- [$399][Symantec]. Варианты
подешевле: RapidSSL [за\ $49][RapidSSL] и\ Comodo SSL [за\ $64.95][comodo]. На\ самом деле вариантов гораздо больше,
если интересно, то\ несложно найти и\ сайты сравнения.

В\ данный момент разрабатывается инициатива по\ бесплатному предоставлению сертификатов, называется [Let’s encrypt][le].
В\ ней участвуют такие известные компании как Mozilla, Cisco и\ Akamai. Надеюсь, в\ скором времени они достигнут цели
и\ с\ шифрованием трафика дела улучшатся. А\ пока...

А\ пока независимые разработчики могут получить бесплатный сертификат, например, [у\ StartSSL][startssl]. Отдельно стоит
упомянуть процесс валидации домена. Чтобы StartSSL признал тебя владельцем домена, ты\ должен владеть одним
из\ 3-х почтовых ящиков на\ этом домене: `postmaster@`, `hostmaster@` или `webmaster@`. Стоит позаботиться
об\ этом заранее, чтобы потом не\ было сюрпризом.

И\ ещё одна внезапно возникшая проблема\ --- выданный сертификат использует промежуточные звенья, так называемые
Intermediate Certificate. Не\ все браузеры умеют правильно их\ получать, Firefox, к\ примеру, один из\ таких браузеров.
Чтобы всё заработало правильно, сервер должен также отдавать необходимые промежуточные сертификаты, то есть недостаточно
указать два файла `.key` и\ `.crt`, чтобы всё заработало. Поэтому берём все выданные нам сертификаты и\ склеиваем их
в\ порядке к\ корневому.

```bash
cat ssl.crt sub.class1.server.ca.pem ca.pem > sslchain.crt
```

В\ результате получим сертификат, который будут принимать все браузеры.

![](/images/screenshots/green-lock.png)

P.S. [HTTPS Everywhere][https-everywhere]\ --- это, вообще говоря, расширение для браузера, которое автоматически
перенаправляет на\ https-версию сайта, если такая существует. Всё для вашей приватности и\ безопасности, так
сказать. Рекомендую.

[comodo]: https://ssl.comodo.com/comodo-ssl-certificate.php
[DigiCert]: https://www.digicert.com/ssl-certificate-comparison.htm
[https]: https://ru.wikipedia.org/wiki/HTTPS
[https-everywhere]: https://www.eff.org/HTTPS-EVERYWHERE
[le]: https://www.letsencrypt.org/
[RapidSSL]: https://www.rapidssl.com/buy-ssl/index.html
[startssl]: https://www.startssl.com/
[Symantec]: http://www.symantec.com/page.jsp?id=compare-ssl-certificates
[thawte]: https://www.thawte.com/ssl/index.html
