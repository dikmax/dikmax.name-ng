---
title: "Обновление ViewModel в ExtJs 5"
date: "2015-02-02T21:55:00+03:00"
published: true
tags: [extjs, javascript, программирование, работа]
---

![](/images/3rd-party/extjs-logo.png)

[Sencha] добавила в\ ExtJs\ 5 крайне удобную концепцию\ --- ViewModel. Она позволяет динамически связывать данные
с\ представлением. Причём данные могут зависеть друг от\ друга и\ вычисляться по\ сложным алгоритмам. Результат
кешируется, и\ до\ тех пор, пока исходные данные не\ поменяются, конечный результат пересчитываться и\ обновляться
не\ будет. [Обязательно посмотрите][view-model], если ещё не\ сталкивались,\ --- очень удобная штука.

Но, к\ сожалению, есть случаи, когда вселенская гармония нарушается и\ ViewModel перестаёт вести себя как подобает.
Например, когда исходные данные\ --- Store. ViewModel не\ умеет подписываться на\ события изменения ни\ Store,
ни\ вложенных объектов. И\ как назло, разработчики не\ предусмотрели метода, который позволил\ бы заставить ViewModel
пересчитать какое-нибудь значение. В\ таких случаях приходится лезть в\ дебри реализации и\ искать обходные пути.

Делюсь заклинанием:

~~~~~js
viewModel.getRoot().descend(['info']).formula.react();
~~~~~

Эта конструкция заставит ViewModel пересчитать значение `info` и\ обновить все связанные View. Просто подставьте
название вашей формулы вместо `info`.

Проверено на\ ExtJS версий\ 5.0 и\ 5.1. Пользуйтесь и\ не\ позволяйте мелочам портить настроение.

[Sencha]: http://www.sencha.com/
[view-model]: http://docs.sencha.com/extjs/5.0/application_architecture/view_models_data_binding.html
